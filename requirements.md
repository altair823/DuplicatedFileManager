# 중복된 파일 처리 명세

## 용어

- 중복: 두 개 이상의 파일이 경로가 다르고 크기와 해쉬 값이 같을 경우 해당 파일들을 중복된 파일이라고 한다. 
- 

## 경우 

1. 파일을 삭제함
   1. 가장 최근 탐색 일자보다 늦은 수정일자를 갖는 최상위 폴더부터 시작.
      1. 해당 폴더의 파일 개수가 이전보다 줄어들었다면 파일이 삭제된 것. 해당 폴더 전체 탐색 후
         데이터베이스 갱신
      2. 이전보다 늘어났다면 파일이 추가된 것이고 2번에서 처리될 것. 넘어감
      3. 변화 없다면 파일이 수정된 것. 3번에서 처리될 것. 넘어감
2. 파일을 추가함
   1. 수정일자로 추가된 파일 정보 데이터베이스에 저장가능
3. 파일을 수정함
   1. 수정일자로 추가된 파일들 중 데이터베이스에 있는 파일과 같은 경로(파일명 포함)를 가진 파일을 
수정으로 간주. 데이터베이스 갱신





1. 중복된 파일이 두 개 이상 있을 때
   1. 파일 시스템에 중복된 파일이 존재 할 때
   2. 데이터베이스 내에 중복된 파일의 정보가 있지만, 실제로는 없을 때

## 대처 

1. 실행 될 때 이전 실행 기록 시간보다 나중에 수정, 생성된 파일을 조회한다. 
   1. 이후에 수정된 
   2. 만약 데이터베이스에 저장된 같은 이름, 같은 경로, 그러나 다른 크기와 다른 해쉬 값의 파일이 있다면 
   그것은 갱신된 파일이다. 이전 데이터를 갱신한다. 
      1. 1-i에 해당하지 않는 파일이 데이터베이스의 어떤 파일과 중복된다면 
         1. 데이터베이스에 저장된 파일이 아직 존재하는지 확인한다. 
            1. 존재하지 않다면 삭제된 것이다. 데이터베이스에서 삭제한다. 
            2. 존재한다면 중복된 파일을 발견한 것이다. 